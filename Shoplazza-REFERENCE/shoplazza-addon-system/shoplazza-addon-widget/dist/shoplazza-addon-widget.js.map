{"version":3,"file":"shoplazza-addon-widget.js","mappings":"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","sources":["webpack://ShoplazzaAddon/webpack/bootstrap","webpack://ShoplazzaAddon/webpack/runtime/define property getters","webpack://ShoplazzaAddon/webpack/runtime/hasOwnProperty shorthand","webpack://ShoplazzaAddon/webpack/runtime/make namespace object","webpack://ShoplazzaAddon/./src/core/WidgetCore.js","webpack://ShoplazzaAddon/./src/cart/CartService.js","webpack://ShoplazzaAddon/./src/ui/ThemeManager.js","webpack://ShoplazzaAddon/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Core widget class for Shoplazza Add-On system\n * Handles widget initialization, configuration, and lifecycle management\n */\nclass WidgetCore {\n  constructor(config = {}) {\n    this.config = {\n      // Default configuration\n      apiEndpoint: config.apiEndpoint || '',\n      shop: config.shop || '',\n      productId: config.productId || null,\n      theme: config.theme || 'default',\n      position: config.position || 'below-price',\n      animation: config.animation || 'highlight',\n      debug: config.debug || false,\n      // Widget behavior\n      autoInit: config.autoInit !== false,\n      autoDetectProduct: config.autoDetectProduct !== false,\n      showDescription: config.showDescription !== false,\n      showImage: config.showImage || false,\n      // Styling\n      primaryColor: config.primaryColor || '#007bff',\n      textColor: config.textColor || '#333333',\n      borderColor: config.borderColor || '#e1e8ed',\n      selectedBackgroundColor: config.selectedBackgroundColor || '#e7f3ff',\n      customCss: config.customCss || '',\n      // Callbacks\n      onInit: config.onInit || null,\n      onAddOnToggle: config.onAddOnToggle || null,\n      onCartUpdate: config.onCartUpdate || null,\n      onError: config.onError || null,\n      ...config,\n    };\n\n    this.state = {\n      initialized: false,\n      addOns: [],\n      selectedAddOns: new Set(),\n      cartItems: [],\n      loading: false,\n      error: null,\n    };\n\n    this.elements = {\n      container: null,\n      widgets: [],\n    };\n\n    // Auto-initialize if enabled\n    if (this.config.autoInit) {\n      this.init();\n    }\n  }\n\n  /**\n   * Initialize the widget\n   */\n  async init() {\n    try {\n      this.log('Initializing Shoplazza Add-On Widget...');\n\n      // Validate configuration\n      if (!this.validateConfig()) {\n        throw new Error('Invalid widget configuration');\n      }\n\n      // Wait for DOM to be ready\n      await this.waitForDOM();\n\n      // Detect product if auto-detection is enabled\n      if (this.config.autoDetectProduct && !this.config.productId) {\n        this.config.productId = this.detectProductId();\n      }\n\n      if (!this.config.productId) {\n        throw new Error('Product ID not found. Cannot initialize widget.');\n      }\n\n      // Load add-on configuration\n      await this.loadAddOnConfiguration();\n\n      // Create widget elements\n      this.createWidgetElements();\n\n      // Apply styling\n      this.applyStyles();\n\n      // Set up event listeners\n      this.setupEventListeners();\n\n      // Load cart state\n      await this.loadCartState();\n\n      this.state.initialized = true;\n      this.log('Widget initialized successfully');\n\n      // Call initialization callback\n      if (this.config.onInit) {\n        this.config.onInit(this);\n      }\n    } catch (error) {\n      this.handleError('Failed to initialize widget', error);\n    }\n  }\n\n  /**\n   * Validate widget configuration\n   */\n  validateConfig() {\n    const required = ['shop'];\n    \n    for (const field of required) {\n      if (!this.config[field]) {\n        this.log(`Missing required configuration: ${field}`, 'error');\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Wait for DOM to be ready\n   */\n  waitForDOM() {\n    return new Promise((resolve) => {\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', resolve);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * Detect product ID from current page\n   */\n  detectProductId() {\n    // Try multiple methods to detect product ID\n    const methods = [\n      // From meta tags\n      () => {\n        const meta = document.querySelector('meta[name=\"product-id\"]');\n        return meta ? meta.getAttribute('content') : null;\n      },\n      // From Shoplazza page data\n      () => {\n        if (window.ShoplazzaAnalytics && window.ShoplazzaAnalytics.meta) {\n          return window.ShoplazzaAnalytics.meta.product?.id;\n        }\n        return null;\n      },\n      // From URL patterns\n      () => {\n        const match = window.location.pathname.match(/\\/products\\/(\\d+)/);\n        return match ? match[1] : null;\n      },\n      // From form data\n      () => {\n        const form = document.querySelector('form[action*=\"/cart/add\"]');\n        if (form) {\n          const productInput = form.querySelector('input[name=\"id\"]');\n          return productInput ? productInput.value : null;\n        }\n        return null;\n      },\n    ];\n\n    for (const method of methods) {\n      try {\n        const productId = method();\n        if (productId) {\n          this.log(`Detected product ID: ${productId}`);\n          return parseInt(productId, 10);\n        }\n      } catch (error) {\n        this.log(`Product detection method failed: ${error.message}`, 'warn');\n      }\n    }\n\n    this.log('Could not detect product ID', 'warn');\n    return null;\n  }\n\n  /**\n   * Load add-on configuration from API\n   */\n  async loadAddOnConfiguration() {\n    try {\n      this.state.loading = true;\n      \n      // Check if demo mode is enabled with mock data\n      if (this.config.demoMode && this.config.mockAddOns) {\n        this.state.addOns = this.config.mockAddOns;\n        this.log('Demo mode: Using mock add-on configuration', this.config.mockAddOns);\n        return;\n      }\n      \n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      \n      // Add demo mode headers if in demo mode\n      if (this.config.demoMode) {\n        headers['X-Demo-Mode'] = 'true';\n        headers['X-Shoplazza-Hmac-Sha256'] = 'demo-signature';\n      }\n      \n      const response = await fetch(`${this.config.apiEndpoint}/api/products/${this.config.productId}?shop=${encodeURIComponent(this.config.shop)}`, {\n        method: 'GET',\n        headers: headers\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.isEnabled) {\n          this.state.addOns = [data];\n          this.log('Add-on configuration loaded', data);\n        } else {\n          this.log('Add-on is disabled for this product');\n        }\n      } else if (response.status === 404) {\n        this.log('No add-on configuration found for this product');\n      } else {\n        throw new Error(`API error: ${response.status}`);\n      }\n    } catch (error) {\n      this.handleError('Failed to load add-on configuration', error);\n    } finally {\n      this.state.loading = false;\n    }\n  }\n\n  /**\n   * Create widget DOM elements\n   */\n  createWidgetElements() {\n    if (this.state.addOns.length === 0) {\n      this.log('No add-ons to display');\n      return;\n    }\n\n    // Find insertion point\n    const insertionPoint = this.findInsertionPoint();\n    if (!insertionPoint) {\n      throw new Error('Could not find suitable insertion point for widget');\n    }\n\n    // Create container\n    this.elements.container = document.createElement('div');\n    this.elements.container.className = 'shoplazza-addon-container';\n    this.elements.container.dataset.theme = this.config.theme;\n\n    // Create widgets for each add-on\n    this.state.addOns.forEach((addOn, index) => {\n      const widget = this.createAddOnWidget(addOn, index);\n      this.elements.widgets.push(widget);\n      this.elements.container.appendChild(widget);\n    });\n\n    // Insert into DOM\n    this.insertWidget(insertionPoint, this.elements.container);\n\n    this.log('Widget elements created and inserted');\n  }\n\n  /**\n   * Find the best insertion point for the widget\n   */\n  findInsertionPoint() {\n    const positions = {\n      'above-price': [\n        '.product-price',\n        '.price',\n        '[class*=\"price\"]',\n      ],\n      'below-price': [\n        '.product-price',\n        '.price',\n        '[class*=\"price\"]',\n      ],\n      'above-add-to-cart': [\n        'button[type=\"submit\"][name=\"add\"]',\n        '.product-form__cart',\n        '.product-form__buttons',\n        '.add-to-cart',\n      ],\n      'below-add-to-cart': [\n        'button[type=\"submit\"][name=\"add\"]',\n        '.product-form__cart',\n        '.product-form__buttons',\n        '.add-to-cart',\n      ],\n    };\n\n    const selectors = positions[this.config.position] || positions['below-price'];\n    \n    for (const selector of selectors) {\n      const element = document.querySelector(selector);\n      if (element) {\n        return { element, position: this.config.position };\n      }\n    }\n\n    // Fallback to product form\n    const productForm = document.querySelector('form[action*=\"/cart/add\"]');\n    if (productForm) {\n      return { element: productForm, position: 'below-add-to-cart' };\n    }\n\n    return null;\n  }\n\n  /**\n   * Insert widget into DOM at the specified position\n   */\n  insertWidget(insertionPoint, widget) {\n    const { element, position } = insertionPoint;\n\n    switch (position) {\n      case 'above-price':\n      case 'above-add-to-cart':\n        element.parentNode.insertBefore(widget, element);\n        break;\n      case 'below-price':\n      case 'below-add-to-cart':\n      default:\n        element.parentNode.insertBefore(widget, element.nextSibling);\n        break;\n    }\n  }\n\n  /**\n   * Create a single add-on widget\n   */\n  createAddOnWidget(addOn, index) {\n    const widget = document.createElement('div');\n    widget.className = 'shoplazza-addon-widget';\n    widget.dataset.addOnId = addOn.id;\n    widget.dataset.productId = addOn.productId;\n\n    const isSelected = this.state.selectedAddOns.has(addOn.id);\n\n    widget.innerHTML = `\n      <div class=\"addon-container ${isSelected ? 'selected' : ''}\">\n        <label class=\"addon-label\">\n          <input type=\"checkbox\" class=\"addon-checkbox\" ${isSelected ? 'checked' : ''}>\n          <span class=\"addon-checkmark\"></span>\n          <div class=\"addon-content\">\n            <div class=\"addon-main\">\n              <span class=\"addon-title\">${this.escapeHtml(addOn.addOn.displayText)}</span>\n              <span class=\"addon-price\">+${this.escapeHtml(addOn.addOn.price)}</span>\n            </div>\n            ${this.config.showDescription && addOn.addOn.description ? `\n              <div class=\"addon-description\">${this.escapeHtml(addOn.addOn.description)}</div>\n            ` : ''}\n            ${this.config.showImage && addOn.addOn.imageUrl ? `\n              <div class=\"addon-image\">\n                <img src=\"${this.escapeHtml(addOn.addOn.imageUrl)}\" alt=\"${this.escapeHtml(addOn.addOn.title)}\" loading=\"lazy\">\n              </div>\n            ` : ''}\n          </div>\n        </label>\n      </div>\n    `;\n\n    return widget;\n  }\n\n  /**\n   * Apply styles to the widget\n   */\n  applyStyles() {\n    if (document.getElementById('shoplazza-addon-styles')) {\n      return; // Styles already applied\n    }\n\n    const style = document.createElement('style');\n    style.id = 'shoplazza-addon-styles';\n    style.textContent = this.generateCSS();\n    document.head.appendChild(style);\n\n    this.log('Styles applied');\n  }\n\n  /**\n   * Generate CSS for the widget\n   */\n  generateCSS() {\n    return `\n      .shoplazza-addon-container {\n        margin: 15px 0;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .shoplazza-addon-widget {\n        margin-bottom: 10px;\n      }\n\n      .addon-container {\n        border: 1px solid ${this.config.borderColor};\n        border-radius: 6px;\n        padding: 12px;\n        transition: all 0.2s ease;\n        background: #fff;\n        cursor: pointer;\n      }\n\n      .addon-container:hover {\n        border-color: ${this.config.primaryColor};\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n      }\n\n      .addon-container.selected {\n        border-color: ${this.config.primaryColor};\n        background-color: ${this.config.selectedBackgroundColor};\n      }\n\n      .addon-label {\n        display: flex;\n        align-items: flex-start;\n        cursor: pointer;\n        margin: 0;\n      }\n\n      .addon-checkbox {\n        margin: 0;\n        margin-right: 10px;\n        margin-top: 2px;\n      }\n\n      .addon-content {\n        flex: 1;\n      }\n\n      .addon-main {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 4px;\n      }\n\n      .addon-title {\n        font-weight: 500;\n        color: ${this.config.textColor};\n        font-size: 14px;\n      }\n\n      .addon-price {\n        font-weight: 600;\n        color: ${this.config.primaryColor};\n        font-size: 14px;\n      }\n\n      .addon-description {\n        color: #666;\n        font-size: 12px;\n        line-height: 1.4;\n        margin-top: 4px;\n      }\n\n      .addon-image {\n        margin-top: 8px;\n      }\n\n      .addon-image img {\n        max-width: 60px;\n        max-height: 40px;\n        border-radius: 4px;\n      }\n\n      /* Theme variations */\n      .shoplazza-addon-container[data-theme=\"minimal\"] .addon-container {\n        border: none;\n        border-bottom: 1px solid ${this.config.borderColor};\n        border-radius: 0;\n        padding: 8px 0;\n      }\n\n      .shoplazza-addon-container[data-theme=\"rounded\"] .addon-container {\n        border-radius: 12px;\n      }\n\n      /* Animation classes */\n      .addon-price-highlight {\n        animation: priceHighlight 0.6s ease;\n      }\n\n      @keyframes priceHighlight {\n        0%, 100% { background-color: transparent; }\n        50% { background-color: ${this.config.primaryColor}20; }\n      }\n\n      /* Custom CSS */\n      ${this.config.customCss}\n    `;\n  }\n\n  /**\n   * Set up event listeners\n   */\n  setupEventListeners() {\n    // Add-on toggle events\n    this.elements.container.addEventListener('change', (event) => {\n      if (event.target.classList.contains('addon-checkbox')) {\n        this.handleAddOnToggle(event);\n      }\n    });\n\n    // Cart form interception\n    this.interceptCartForms();\n\n    this.log('Event listeners set up');\n  }\n\n  /**\n   * Handle add-on toggle\n   */\n  async handleAddOnToggle(event) {\n    const checkbox = event.target;\n    const widget = checkbox.closest('.shoplazza-addon-widget');\n    const addOnId = parseInt(widget.dataset.addOnId, 10);\n    const isChecked = checkbox.checked;\n\n    try {\n      const container = checkbox.closest('.addon-container');\n      container.classList.toggle('selected', isChecked);\n\n      if (isChecked) {\n        this.state.selectedAddOns.add(addOnId);\n      } else {\n        this.state.selectedAddOns.delete(addOnId);\n      }\n\n      // Trigger price animation if enabled\n      if (this.config.animation === 'highlight') {\n        this.animatePriceChange();\n      }\n\n      // Call toggle callback\n      if (this.config.onAddOnToggle) {\n        this.config.onAddOnToggle(addOnId, isChecked, this);\n      }\n\n      this.log(`Add-on ${addOnId} ${isChecked ? 'selected' : 'deselected'}`);\n    } catch (error) {\n      this.handleError('Failed to toggle add-on', error);\n    }\n  }\n\n  /**\n   * Animate price change\n   */\n  animatePriceChange() {\n    const priceElements = document.querySelectorAll('.addon-price');\n    priceElements.forEach((element) => {\n      element.classList.remove('addon-price-highlight');\n      // Force reflow\n      element.offsetHeight; // eslint-disable-line no-unused-expressions\n      element.classList.add('addon-price-highlight');\n    });\n  }\n\n  /**\n   * Intercept cart forms to add selected add-ons\n   */\n  interceptCartForms() {\n    const forms = document.querySelectorAll('form[action*=\"/cart/add\"]');\n    \n    forms.forEach((form) => {\n      form.addEventListener('submit', (event) => {\n        this.handleCartFormSubmit(event, form);\n      });\n    });\n  }\n\n  /**\n   * Handle cart form submission\n   */\n  async handleCartFormSubmit(event, form) {\n    if (this.state.selectedAddOns.size === 0) {\n      return; // No add-ons selected, proceed normally\n    }\n\n    event.preventDefault();\n\n    try {\n      // Get main product data\n      const formData = new FormData(form);\n      const mainProductId = formData.get('id');\n      const quantity = parseInt(formData.get('quantity') || '1', 10);\n\n      // Add main product to cart\n      await this.addToCart(mainProductId, quantity);\n\n      // Add selected add-ons\n      for (const addOnId of this.state.selectedAddOns) {\n        const addOn = this.state.addOns.find(a => a.id === addOnId);\n        if (addOn && addOn.addOn.addOnVariantId) {\n          await this.addToCart(addOn.addOn.addOnVariantId, quantity, {\n            '_addon': 'true',\n            '_addon_for': mainProductId,\n            '_addon_title': addOn.addOn.title,\n          });\n        }\n      }\n\n      // Call cart update callback\n      if (this.config.onCartUpdate) {\n        this.config.onCartUpdate(this.state.selectedAddOns, this);\n      }\n\n      // Redirect to cart or show success message\n      if (form.action && form.action.includes('/cart/add')) {\n        window.location.href = '/cart';\n      }\n    } catch (error) {\n      this.handleError('Failed to add items to cart', error);\n    }\n  }\n\n  /**\n   * Add item to cart using Shoplazza's cart API\n   */\n  async addToCart(variantId, quantity, properties = {}) {\n    const response = await fetch('/cart/add.js', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        id: variantId,\n        quantity,\n        properties,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to add item to cart: ${response.status}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Load current cart state\n   */\n  async loadCartState() {\n    try {\n      const response = await fetch('/cart.js');\n      if (response.ok) {\n        this.state.cartItems = await response.json();\n      }\n    } catch (error) {\n      this.log('Failed to load cart state', 'warn');\n    }\n  }\n\n  /**\n   * Handle errors\n   */\n  handleError(message, error) {\n    this.state.error = error;\n    this.log(`${message}: ${error.message}`, 'error');\n\n    if (this.config.onError) {\n      this.config.onError(message, error, this);\n    }\n  }\n\n  /**\n   * Logging utility\n   */\n  log(message, level = 'info') {\n    if (!this.config.debug) return;\n\n    const prefix = '[Shoplazza Add-On Widget]';\n    switch (level) {\n      case 'error':\n        console.error(prefix, message);\n        break;\n      case 'warn':\n        console.warn(prefix, message);\n        break;\n      default:\n        console.log(prefix, message);\n    }\n  }\n\n  /**\n   * Escape HTML to prevent XSS\n   */\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Destroy the widget\n   */\n  destroy() {\n    if (this.elements.container) {\n      this.elements.container.remove();\n    }\n\n    const styles = document.getElementById('shoplazza-addon-styles');\n    if (styles) {\n      styles.remove();\n    }\n\n    this.state.initialized = false;\n    this.log('Widget destroyed');\n  }\n\n  /**\n   * Get current state\n   */\n  getState() {\n    return { ...this.state };\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (this.state.initialized) {\n      // Re-apply styles if styling config changed\n      const styleKeys = ['primaryColor', 'textColor', 'borderColor', 'selectedBackgroundColor', 'customCss'];\n      if (styleKeys.some(key => newConfig.hasOwnProperty(key))) {\n        const existingStyles = document.getElementById('shoplazza-addon-styles');\n        if (existingStyles) {\n          existingStyles.textContent = this.generateCSS();\n        }\n      }\n    }\n  }\n}\n\nexport default WidgetCore;","/**\n * Cart service for handling Shoplazza cart operations\n * Manages add-ons in the cart context\n */\nclass CartService {\n  constructor(config = {}) {\n    this.config = {\n      debug: config.debug || false,\n      retryAttempts: config.retryAttempts || 3,\n      retryDelay: config.retryDelay || 1000,\n      ...config,\n    };\n\n    this.state = {\n      cart: null,\n      lastUpdate: null,\n    };\n  }\n\n  /**\n   * Get current cart contents\n   */\n  async getCart() {\n    try {\n      const response = await fetch('/cart.js', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to get cart: ${response.status}`);\n      }\n\n      this.state.cart = await response.json();\n      this.state.lastUpdate = Date.now();\n      \n      this.log('Cart loaded', this.state.cart);\n      return this.state.cart;\n    } catch (error) {\n      this.log(`Failed to get cart: ${error.message}`, 'error');\n      throw error;\n    }\n  }\n\n  /**\n   * Add item to cart\n   */\n  async addToCart(variantId, quantity = 1, properties = {}) {\n    const data = {\n      id: variantId,\n      quantity,\n      properties,\n    };\n\n    return this.makeCartRequest('/cart/add.js', 'POST', data);\n  }\n\n  /**\n   * Update cart item quantities\n   */\n  async updateCart(updates) {\n    const data = { updates };\n    return this.makeCartRequest('/cart/update.js', 'POST', data);\n  }\n\n  /**\n   * Change specific cart line\n   */\n  async changeCartLine(line, quantity, properties = {}) {\n    const data = {\n      line,\n      quantity,\n      properties,\n    };\n\n    return this.makeCartRequest('/cart/change.js', 'POST', data);\n  }\n\n  /**\n   * Remove item from cart\n   */\n  async removeFromCart(variantId) {\n    const updates = { [variantId]: 0 };\n    return this.updateCart(updates);\n  }\n\n  /**\n   * Clear entire cart\n   */\n  async clearCart() {\n    return this.makeCartRequest('/cart/clear.js', 'POST');\n  }\n\n  /**\n   * Add multiple items to cart (for main product + add-ons)\n   */\n  async addMultipleToCart(items) {\n    const results = [];\n    \n    for (const item of items) {\n      try {\n        const result = await this.addToCart(\n          item.variantId,\n          item.quantity,\n          item.properties\n        );\n        results.push({ success: true, item, result });\n      } catch (error) {\n        this.log(`Failed to add item ${item.variantId}: ${error.message}`, 'error');\n        results.push({ success: false, item, error });\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * Check if add-on is already in cart\n   */\n  async isAddOnInCart(addOnVariantId, mainProductVariantId) {\n    const cart = await this.getCart();\n    \n    return cart.items.some(item => \n      item.variant_id === addOnVariantId && \n      item.properties._addon === 'true' &&\n      item.properties._addon_for === mainProductVariantId.toString()\n    );\n  }\n\n  /**\n   * Get all add-on items in cart\n   */\n  async getAddOnItems() {\n    const cart = await this.getCart();\n    \n    return cart.items.filter(item => \n      item.properties && item.properties._addon === 'true'\n    );\n  }\n\n  /**\n   * Remove add-ons for a specific product\n   */\n  async removeAddOnsForProduct(productVariantId) {\n    const cart = await this.getCart();\n    const addOnItems = cart.items.filter(item => \n      item.properties && \n      item.properties._addon === 'true' &&\n      item.properties._addon_for === productVariantId.toString()\n    );\n\n    const updates = {};\n    addOnItems.forEach(item => {\n      updates[item.variant_id] = 0;\n    });\n\n    if (Object.keys(updates).length > 0) {\n      return this.updateCart(updates);\n    }\n\n    return cart;\n  }\n\n  /**\n   * Sync add-ons with cart (add missing, remove unchecked)\n   */\n  async syncAddOnsWithCart(mainProductVariantId, selectedAddOns, quantity = 1) {\n    try {\n      const cart = await this.getCart();\n      const existingAddOns = cart.items.filter(item => \n        item.properties &&\n        item.properties._addon === 'true' &&\n        item.properties._addon_for === mainProductVariantId.toString()\n      );\n\n      const updates = {};\n      const toAdd = [];\n\n      // Check existing add-ons\n      existingAddOns.forEach(item => {\n        const addOnId = item.properties._addon_id;\n        if (selectedAddOns.has(parseInt(addOnId, 10))) {\n          // Keep this add-on, update quantity if needed\n          if (item.quantity !== quantity) {\n            updates[item.variant_id] = quantity;\n          }\n        } else {\n          // Remove this add-on\n          updates[item.variant_id] = 0;\n        }\n      });\n\n      // Check for new add-ons to add\n      for (const addOn of selectedAddOns.values()) {\n        const exists = existingAddOns.some(item => \n          item.properties._addon_id === addOn.id.toString()\n        );\n\n        if (!exists && addOn.addOnVariantId) {\n          toAdd.push({\n            variantId: addOn.addOnVariantId,\n            quantity,\n            properties: {\n              '_addon': 'true',\n              '_addon_for': mainProductVariantId.toString(),\n              '_addon_id': addOn.id.toString(),\n              '_addon_title': addOn.addOn.title,\n            },\n          });\n        }\n      }\n\n      // Apply updates\n      if (Object.keys(updates).length > 0) {\n        await this.updateCart(updates);\n      }\n\n      // Add new items\n      if (toAdd.length > 0) {\n        await this.addMultipleToCart(toAdd);\n      }\n\n      return this.getCart();\n    } catch (error) {\n      this.log(`Failed to sync add-ons: ${error.message}`, 'error');\n      throw error;\n    }\n  }\n\n  /**\n   * Get cart total including add-ons\n   */\n  async getCartTotal() {\n    const cart = await this.getCart();\n    return {\n      totalPrice: cart.total_price,\n      itemCount: cart.item_count,\n      addOnCount: cart.items.filter(item => \n        item.properties && item.properties._addon === 'true'\n      ).length,\n    };\n  }\n\n  /**\n   * Make a cart API request with retry logic\n   */\n  async makeCartRequest(endpoint, method, data = null, attempt = 1) {\n    try {\n      const options = {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      };\n\n      if (data && (method === 'POST' || method === 'PUT')) {\n        options.body = JSON.stringify(data);\n      }\n\n      const response = await fetch(endpoint, options);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Cart API error ${response.status}: ${errorText}`);\n      }\n\n      const result = await response.json();\n      this.state.cart = result;\n      this.state.lastUpdate = Date.now();\n\n      this.log(`Cart ${method} ${endpoint}`, result);\n      return result;\n    } catch (error) {\n      this.log(`Cart request failed (attempt ${attempt}): ${error.message}`, 'error');\n\n      // Retry logic\n      if (attempt < this.config.retryAttempts) {\n        await this.delay(this.config.retryDelay * attempt);\n        return this.makeCartRequest(endpoint, method, data, attempt + 1);\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Delay utility for retries\n   */\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Subscribe to cart changes\n   */\n  onCartChange(callback) {\n    // Poll for cart changes\n    const checkInterval = 5000; // 5 seconds\n    \n    const checkForChanges = async () => {\n      try {\n        const currentCart = await this.getCart();\n        if (this.state.lastUpdate && currentCart) {\n          callback(currentCart);\n        }\n      } catch (error) {\n        this.log(`Error checking cart changes: ${error.message}`, 'error');\n      }\n    };\n\n    const intervalId = setInterval(checkForChanges, checkInterval);\n    \n    // Return cleanup function\n    return () => clearInterval(intervalId);\n  }\n\n  /**\n   * Format price for display\n   */\n  formatPrice(cents, currency = 'USD') {\n    const amount = cents / 100;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency,\n    }).format(amount);\n  }\n\n  /**\n   * Get add-on summary for cart display\n   */\n  async getAddOnSummary() {\n    const cart = await this.getCart();\n    const addOns = cart.items.filter(item => \n      item.properties && item.properties._addon === 'true'\n    );\n\n    const summary = {\n      count: addOns.length,\n      totalPrice: addOns.reduce((sum, item) => sum + item.final_line_price, 0),\n      items: addOns.map(item => ({\n        id: item.id,\n        variantId: item.variant_id,\n        title: item.properties._addon_title || item.title,\n        price: item.final_price,\n        quantity: item.quantity,\n        linePrice: item.final_line_price,\n        forProduct: item.properties._addon_for,\n      })),\n    };\n\n    return summary;\n  }\n\n  /**\n   * Validate cart before checkout\n   */\n  async validateCart() {\n    const cart = await this.getCart();\n    const issues = [];\n\n    // Check for orphaned add-ons (add-ons without main product)\n    const addOns = cart.items.filter(item => \n      item.properties && item.properties._addon === 'true'\n    );\n\n    const mainProducts = cart.items.filter(item => \n      !item.properties || item.properties._addon !== 'true'\n    );\n\n    addOns.forEach(addOn => {\n      const mainProductExists = mainProducts.some(product => \n        product.variant_id.toString() === addOn.properties._addon_for\n      );\n\n      if (!mainProductExists) {\n        issues.push({\n          type: 'orphaned_addon',\n          item: addOn,\n          message: `Add-on \"${addOn.title}\" has no corresponding main product`,\n        });\n      }\n    });\n\n    return {\n      valid: issues.length === 0,\n      issues,\n    };\n  }\n\n  /**\n   * Clean up orphaned add-ons\n   */\n  async cleanupOrphanedAddOns() {\n    const validation = await this.validateCart();\n    \n    if (!validation.valid) {\n      const orphanedAddOns = validation.issues\n        .filter(issue => issue.type === 'orphaned_addon')\n        .map(issue => issue.item);\n\n      if (orphanedAddOns.length > 0) {\n        const updates = {};\n        orphanedAddOns.forEach(item => {\n          updates[item.variant_id] = 0;\n        });\n\n        await this.updateCart(updates);\n        this.log(`Cleaned up ${orphanedAddOns.length} orphaned add-ons`);\n      }\n    }\n\n    return this.getCart();\n  }\n\n  /**\n   * Logging utility\n   */\n  log(message, level = 'info') {\n    if (!this.config.debug) return;\n\n    const prefix = '[Cart Service]';\n    switch (level) {\n      case 'error':\n        console.error(prefix, message);\n        break;\n      case 'warn':\n        console.warn(prefix, message);\n        break;\n      default:\n        console.log(prefix, message);\n    }\n  }\n\n  /**\n   * Get current state\n   */\n  getState() {\n    return { ...this.state };\n  }\n}\n\nexport default CartService;","/**\n * Theme manager for widget styling and appearance\n * Handles different themes and customization options\n */\nclass ThemeManager {\n  constructor(config = {}) {\n    this.config = {\n      theme: config.theme || 'default',\n      primaryColor: config.primaryColor || '#007bff',\n      textColor: config.textColor || '#333333',\n      borderColor: config.borderColor || '#e1e8ed',\n      selectedBackgroundColor: config.selectedBackgroundColor || '#e7f3ff',\n      customCss: config.customCss || '',\n      debug: config.debug || false,\n      ...config,\n    };\n\n    this.themes = this.initializeThemes();\n    this.styleElement = null;\n  }\n\n  /**\n   * Initialize predefined themes\n   */\n  initializeThemes() {\n    return {\n      default: {\n        name: 'Default',\n        styles: {\n          container: {\n            margin: '15px 0',\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n          },\n          widget: {\n            marginBottom: '10px',\n          },\n          addonContainer: {\n            border: `1px solid ${this.config.borderColor}`,\n            borderRadius: '6px',\n            padding: '12px',\n            transition: 'all 0.2s ease',\n            background: '#fff',\n            cursor: 'pointer',\n          },\n          addonContainerHover: {\n            borderColor: this.config.primaryColor,\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n          },\n          addonContainerSelected: {\n            borderColor: this.config.primaryColor,\n            backgroundColor: this.config.selectedBackgroundColor,\n          },\n        },\n      },\n      minimal: {\n        name: 'Minimal',\n        styles: {\n          container: {\n            margin: '10px 0',\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n          },\n          widget: {\n            marginBottom: '8px',\n          },\n          addonContainer: {\n            border: 'none',\n            borderBottom: `1px solid ${this.config.borderColor}`,\n            borderRadius: '0',\n            padding: '8px 0',\n            transition: 'all 0.2s ease',\n            background: 'transparent',\n            cursor: 'pointer',\n          },\n          addonContainerHover: {\n            backgroundColor: '#f8f9fa',\n          },\n          addonContainerSelected: {\n            backgroundColor: this.config.selectedBackgroundColor,\n            borderBottomColor: this.config.primaryColor,\n          },\n        },\n      },\n      rounded: {\n        name: 'Rounded',\n        styles: {\n          container: {\n            margin: '15px 0',\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n          },\n          widget: {\n            marginBottom: '12px',\n          },\n          addonContainer: {\n            border: `2px solid ${this.config.borderColor}`,\n            borderRadius: '16px',\n            padding: '16px',\n            transition: 'all 0.3s ease',\n            background: '#fff',\n            cursor: 'pointer',\n          },\n          addonContainerHover: {\n            borderColor: this.config.primaryColor,\n            transform: 'translateY(-1px)',\n            boxShadow: '0 4px 8px rgba(0,0,0,0.12)',\n          },\n          addonContainerSelected: {\n            borderColor: this.config.primaryColor,\n            backgroundColor: this.config.selectedBackgroundColor,\n            transform: 'translateY(-1px)',\n          },\n        },\n      },\n      compact: {\n        name: 'Compact',\n        styles: {\n          container: {\n            margin: '8px 0',\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n          },\n          widget: {\n            marginBottom: '6px',\n          },\n          addonContainer: {\n            border: `1px solid ${this.config.borderColor}`,\n            borderRadius: '4px',\n            padding: '8px',\n            transition: 'all 0.15s ease',\n            background: '#fff',\n            cursor: 'pointer',\n          },\n          addonContainerHover: {\n            borderColor: this.config.primaryColor,\n          },\n          addonContainerSelected: {\n            borderColor: this.config.primaryColor,\n            backgroundColor: this.config.selectedBackgroundColor,\n          },\n        },\n      },\n    };\n  }\n\n  /**\n   * Apply theme styles to the page\n   */\n  applyTheme() {\n    if (this.styleElement) {\n      this.styleElement.remove();\n    }\n\n    this.styleElement = document.createElement('style');\n    this.styleElement.id = 'shoplazza-addon-theme-styles';\n    this.styleElement.textContent = this.generateCSS();\n    document.head.appendChild(this.styleElement);\n\n    this.log(`Applied theme: ${this.config.theme}`);\n  }\n\n  /**\n   * Generate CSS for the current theme\n   */\n  generateCSS() {\n    const theme = this.themes[this.config.theme] || this.themes.default;\n    \n    return `\n      /* Shoplazza Add-On Widget - ${theme.name} Theme */\n      .shoplazza-addon-container {\n        margin: ${theme.styles.container.margin};\n        font-family: ${theme.styles.container.fontFamily};\n      }\n\n      .shoplazza-addon-widget {\n        margin-bottom: ${theme.styles.widget.marginBottom};\n      }\n\n      .addon-container {\n        ${this.stylesToCSS(theme.styles.addonContainer)}\n      }\n\n      .addon-container:hover {\n        ${this.stylesToCSS(theme.styles.addonContainerHover)}\n      }\n\n      .addon-container.selected {\n        ${this.stylesToCSS(theme.styles.addonContainerSelected)}\n      }\n\n      .addon-label {\n        display: flex;\n        align-items: flex-start;\n        cursor: pointer;\n        margin: 0;\n        width: 100%;\n      }\n\n      .addon-checkbox {\n        margin: 0;\n        margin-right: 10px;\n        margin-top: 2px;\n        accent-color: ${this.config.primaryColor};\n      }\n\n      .addon-checkmark {\n        /* Custom checkbox styling can be added here */\n      }\n\n      .addon-content {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .addon-main {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 4px;\n        gap: 8px;\n      }\n\n      .addon-title {\n        font-weight: 500;\n        color: ${this.config.textColor};\n        font-size: ${this.getFontSize('title')};\n        line-height: 1.3;\n        flex: 1;\n      }\n\n      .addon-price {\n        font-weight: 600;\n        color: ${this.config.primaryColor};\n        font-size: ${this.getFontSize('price')};\n        white-space: nowrap;\n      }\n\n      .addon-description {\n        color: #666;\n        font-size: ${this.getFontSize('description')};\n        line-height: 1.4;\n        margin-top: 4px;\n      }\n\n      .addon-image {\n        margin-top: 8px;\n      }\n\n      .addon-image img {\n        max-width: ${this.getImageSize()};\n        max-height: 40px;\n        border-radius: ${this.getImageBorderRadius()};\n        object-fit: cover;\n      }\n\n      /* Loading state */\n      .addon-container.loading {\n        opacity: 0.6;\n        pointer-events: none;\n      }\n\n      .addon-container.loading::after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        right: 12px;\n        width: 16px;\n        height: 16px;\n        border: 2px solid ${this.config.primaryColor};\n        border-top: 2px solid transparent;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      }\n\n      /* Error state */\n      .addon-container.error {\n        border-color: #dc3545;\n        background-color: #fff5f5;\n      }\n\n      /* Disabled state */\n      .addon-container.disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      .addon-container.disabled .addon-checkbox {\n        pointer-events: none;\n      }\n\n      /* Animations */\n      .addon-price-highlight {\n        animation: priceHighlight 0.6s ease;\n      }\n\n      @keyframes priceHighlight {\n        0%, 100% { background-color: transparent; }\n        50% { background-color: ${this.config.primaryColor}20; }\n      }\n\n      @keyframes spin {\n        0% { transform: translate(-50%, -50%) rotate(0deg); }\n        100% { transform: translate(-50%, -50%) rotate(360deg); }\n      }\n\n      /* Responsive design */\n      @media (max-width: 480px) {\n        .shoplazza-addon-container {\n          margin: 10px 0;\n        }\n\n        .addon-container {\n          padding: 10px;\n        }\n\n        .addon-main {\n          flex-direction: column;\n          align-items: flex-start;\n          gap: 4px;\n        }\n\n        .addon-title {\n          font-size: 13px;\n        }\n\n        .addon-price {\n          font-size: 13px;\n        }\n\n        .addon-description {\n          font-size: 11px;\n        }\n      }\n\n      /* Accessibility */\n      .addon-container:focus-within {\n        outline: 2px solid ${this.config.primaryColor};\n        outline-offset: 2px;\n      }\n\n      .addon-checkbox:focus {\n        outline: none;\n      }\n\n      /* High contrast mode support */\n      @media (prefers-contrast: high) {\n        .addon-container {\n          border-width: 2px;\n        }\n\n        .addon-title {\n          font-weight: 600;\n        }\n\n        .addon-price {\n          font-weight: 700;\n        }\n      }\n\n      /* Reduced motion support */\n      @media (prefers-reduced-motion: reduce) {\n        .addon-container,\n        .addon-container:hover,\n        .addon-container.selected {\n          transition: none;\n        }\n\n        .addon-price-highlight {\n          animation: none;\n        }\n      }\n\n      /* Dark mode support */\n      @media (prefers-color-scheme: dark) {\n        .addon-container {\n          background: #1a1a1a;\n          border-color: #404040;\n          color: #ffffff;\n        }\n\n        .addon-title {\n          color: #ffffff;\n        }\n\n        .addon-description {\n          color: #cccccc;\n        }\n\n        .addon-container.selected {\n          background-color: ${this.config.primaryColor}20;\n        }\n      }\n\n      /* Custom CSS */\n      ${this.config.customCss}\n    `;\n  }\n\n  /**\n   * Convert style object to CSS string\n   */\n  stylesToCSS(styles) {\n    return Object.entries(styles)\n      .map(([property, value]) => `${this.camelToKebab(property)}: ${value};`)\n      .join('\\n        ');\n  }\n\n  /**\n   * Convert camelCase to kebab-case\n   */\n  camelToKebab(str) {\n    return str.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get font size based on theme\n   */\n  getFontSize(element) {\n    const sizes = {\n      compact: {\n        title: '13px',\n        price: '13px',\n        description: '11px',\n      },\n      default: {\n        title: '14px',\n        price: '14px',\n        description: '12px',\n      },\n    };\n\n    const themeKey = this.config.theme === 'compact' ? 'compact' : 'default';\n    return sizes[themeKey][element] || sizes.default[element];\n  }\n\n  /**\n   * Get image size based on theme\n   */\n  getImageSize() {\n    return this.config.theme === 'compact' ? '50px' : '60px';\n  }\n\n  /**\n   * Get image border radius based on theme\n   */\n  getImageBorderRadius() {\n    const radiusMap = {\n      rounded: '8px',\n      minimal: '2px',\n      compact: '3px',\n      default: '4px',\n    };\n\n    return radiusMap[this.config.theme] || radiusMap.default;\n  }\n\n  /**\n   * Update theme configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n    \n    // Reinitialize themes with new colors\n    this.themes = this.initializeThemes();\n    \n    // Reapply styles\n    this.applyTheme();\n    \n    this.log('Theme configuration updated');\n  }\n\n  /**\n   * Switch to a different theme\n   */\n  switchTheme(themeName) {\n    if (this.themes[themeName]) {\n      this.config.theme = themeName;\n      this.applyTheme();\n      this.log(`Switched to theme: ${themeName}`);\n    } else {\n      this.log(`Theme not found: ${themeName}`, 'warn');\n    }\n  }\n\n  /**\n   * Get available themes\n   */\n  getAvailableThemes() {\n    return Object.keys(this.themes).map(key => ({\n      key,\n      name: this.themes[key].name,\n    }));\n  }\n\n  /**\n   * Add custom theme\n   */\n  addCustomTheme(name, styles) {\n    this.themes[name] = {\n      name: name.charAt(0).toUpperCase() + name.slice(1),\n      styles,\n    };\n    \n    this.log(`Added custom theme: ${name}`);\n  }\n\n  /**\n   * Remove theme styles\n   */\n  removeStyles() {\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n      this.log('Theme styles removed');\n    }\n  }\n\n  /**\n   * Get current theme configuration\n   */\n  getCurrentTheme() {\n    return {\n      name: this.config.theme,\n      config: { ...this.config },\n      theme: this.themes[this.config.theme],\n    };\n  }\n\n  /**\n   * Generate theme preview CSS\n   */\n  generatePreviewCSS(themeName, customConfig = {}) {\n    const originalConfig = { ...this.config };\n    this.config = { ...this.config, ...customConfig, theme: themeName };\n    \n    const css = this.generateCSS();\n    \n    // Restore original config\n    this.config = originalConfig;\n    \n    return css;\n  }\n\n  /**\n   * Logging utility\n   */\n  log(message, level = 'info') {\n    if (!this.config.debug) return;\n\n    const prefix = '[Theme Manager]';\n    switch (level) {\n      case 'error':\n        console.error(prefix, message);\n        break;\n      case 'warn':\n        console.warn(prefix, message);\n        break;\n      default:\n        console.log(prefix, message);\n    }\n  }\n}\n\nexport default ThemeManager;","/**\n * Main entry point for the Shoplazza Add-On Widget\n * Provides a global interface for initializing and managing the widget\n */\n\nimport WidgetCore from './core/WidgetCore.js';\nimport CartService from './cart/CartService.js';\nimport ThemeManager from './ui/ThemeManager.js';\n\n// Global widget class\nclass ShoplazzaAddonWidget {\n  constructor(config = {}) {\n    this.instances = new Map();\n    this.defaultConfig = {\n      debug: false,\n      autoInit: true,\n      autoDetectProduct: true,\n      ...config,\n    };\n  }\n\n  /**\n   * Initialize widget with configuration\n   */\n  init(config = {}) {\n    const finalConfig = { ...this.defaultConfig, ...config };\n    \n    try {\n      const widget = new WidgetCore(finalConfig);\n      const instanceId = this.generateInstanceId();\n      \n      this.instances.set(instanceId, widget);\n      \n      if (finalConfig.debug) {\n        console.log('[Shoplazza Add-On Widget] Initialized with config:', finalConfig);\n      }\n      \n      return {\n        id: instanceId,\n        widget,\n        destroy: () => this.destroy(instanceId),\n        getState: () => widget.getState(),\n        updateConfig: (newConfig) => widget.updateConfig(newConfig),\n      };\n    } catch (error) {\n      console.error('[Shoplazza Add-On Widget] Initialization failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Initialize widget on specific product page\n   */\n  initForProduct(productId, config = {}) {\n    return this.init({ ...config, productId, autoDetectProduct: false });\n  }\n\n  /**\n   * Initialize multiple widgets\n   */\n  initMultiple(configs) {\n    return configs.map(config => this.init(config));\n  }\n\n  /**\n   * Destroy widget instance\n   */\n  destroy(instanceId) {\n    const widget = this.instances.get(instanceId);\n    if (widget) {\n      widget.destroy();\n      this.instances.delete(instanceId);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Destroy all widget instances\n   */\n  destroyAll() {\n    this.instances.forEach((widget, id) => {\n      widget.destroy();\n    });\n    this.instances.clear();\n  }\n\n  /**\n   * Get widget instance\n   */\n  getInstance(instanceId) {\n    return this.instances.get(instanceId);\n  }\n\n  /**\n   * Get all widget instances\n   */\n  getAllInstances() {\n    return Array.from(this.instances.values());\n  }\n\n  /**\n   * Update default configuration\n   */\n  setDefaultConfig(config) {\n    this.defaultConfig = { ...this.defaultConfig, ...config };\n  }\n\n  /**\n   * Create cart service instance\n   */\n  createCartService(config = {}) {\n    return new CartService({ ...this.defaultConfig, ...config });\n  }\n\n  /**\n   * Create theme manager instance\n   */\n  createThemeManager(config = {}) {\n    return new ThemeManager({ ...this.defaultConfig, ...config });\n  }\n\n  /**\n   * Utility method to check if product has add-ons\n   */\n  async hasAddOns(shop, productId) {\n    try {\n      const response = await fetch(`/api/products/${productId}?shop=${encodeURIComponent(shop)}`);\n      if (response.ok) {\n        const data = await response.json();\n        return data.isEnabled || false;\n      }\n      return false;\n    } catch (error) {\n      console.warn('[Shoplazza Add-On Widget] Failed to check add-ons:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Auto-initialize on page load if configured\n   */\n  autoInit() {\n    // Check for auto-init configuration in meta tags or global variables\n    const metaConfig = this.getMetaConfig();\n    const globalConfig = window.ShoplazzaAddonConfig || {};\n    \n    const config = { ...metaConfig, ...globalConfig };\n    \n    if (config.autoInit !== false) {\n      // Wait for DOM ready\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', () => {\n          this.init(config);\n        });\n      } else {\n        this.init(config);\n      }\n    }\n  }\n\n  /**\n   * Get configuration from meta tags\n   */\n  getMetaConfig() {\n    const config = {};\n    \n    const metaTags = {\n      'shoplazza-addon-shop': 'shop',\n      'shoplazza-addon-product-id': 'productId',\n      'shoplazza-addon-api-endpoint': 'apiEndpoint',\n      'shoplazza-addon-theme': 'theme',\n      'shoplazza-addon-debug': 'debug',\n    };\n\n    Object.entries(metaTags).forEach(([metaName, configKey]) => {\n      const meta = document.querySelector(`meta[name=\"${metaName}\"]`);\n      if (meta) {\n        let value = meta.getAttribute('content');\n        \n        // Parse boolean values\n        if (value === 'true') value = true;\n        if (value === 'false') value = false;\n        \n        // Parse numeric values\n        if (configKey === 'productId' && value) {\n          value = parseInt(value, 10);\n        }\n        \n        config[configKey] = value;\n      }\n    });\n\n    return config;\n  }\n\n  /**\n   * Generate unique instance ID\n   */\n  generateInstanceId() {\n    return `shoplazza-addon-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Get version information\n   */\n  getVersion() {\n    return '1.0.0';\n  }\n\n  /**\n   * Get debug information\n   */\n  getDebugInfo() {\n    return {\n      version: this.getVersion(),\n      instances: this.instances.size,\n      defaultConfig: this.defaultConfig,\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      timestamp: new Date().toISOString(),\n    };\n  }\n}\n\n// Create global instance\nconst shoplazzaAddon = new ShoplazzaAddonWidget();\n\n// Auto-initialize if enabled\nshoplazzaAddon.autoInit();\n\n// Expose to global scope\nwindow.ShoplazzaAddon = shoplazzaAddon;\n\n// Also expose individual classes for advanced usage\nwindow.ShoplazzaAddon.WidgetCore = WidgetCore;\nwindow.ShoplazzaAddon.CartService = CartService;\nwindow.ShoplazzaAddon.ThemeManager = ThemeManager;\n\n// Export for module usage\nexport default shoplazzaAddon;\nexport { WidgetCore, CartService, ThemeManager };"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","constructor","config","this","apiEndpoint","shop","productId","theme","position","animation","debug","autoInit","autoDetectProduct","showDescription","showImage","primaryColor","textColor","borderColor","selectedBackgroundColor","customCss","onInit","onAddOnToggle","onCartUpdate","onError","state","initialized","addOns","selectedAddOns","Set","cartItems","loading","error","elements","container","widgets","init","log","validateConfig","Error","waitForDOM","detectProductId","loadAddOnConfiguration","createWidgetElements","applyStyles","setupEventListeners","loadCartState","handleError","required","field","Promise","resolve","document","readyState","addEventListener","methods","meta","querySelector","getAttribute","window","ShoplazzaAnalytics","product","id","match","location","pathname","form","productInput","method","parseInt","message","demoMode","mockAddOns","headers","response","fetch","encodeURIComponent","ok","data","json","isEnabled","status","length","insertionPoint","findInsertionPoint","createElement","className","dataset","forEach","addOn","index","widget","createAddOnWidget","push","appendChild","insertWidget","positions","selectors","selector","element","productForm","parentNode","insertBefore","nextSibling","addOnId","isSelected","has","innerHTML","escapeHtml","displayText","price","description","imageUrl","title","getElementById","style","textContent","generateCSS","head","event","target","classList","contains","handleAddOnToggle","interceptCartForms","checkbox","closest","isChecked","checked","toggle","add","delete","animatePriceChange","querySelectorAll","remove","offsetHeight","handleCartFormSubmit","size","preventDefault","formData","FormData","mainProductId","quantity","addToCart","find","a","addOnVariantId","action","includes","href","variantId","properties","body","JSON","stringify","level","prefix","console","warn","text","div","destroy","styles","getState","updateConfig","newConfig","some","existingStyles","retryAttempts","retryDelay","cart","lastUpdate","getCart","Date","now","makeCartRequest","updateCart","updates","changeCartLine","line","removeFromCart","clearCart","addMultipleToCart","items","results","item","result","success","isAddOnInCart","mainProductVariantId","variant_id","_addon","_addon_for","toString","getAddOnItems","filter","removeAddOnsForProduct","productVariantId","addOnItems","keys","syncAddOnsWithCart","existingAddOns","toAdd","_addon_id","values","getCartTotal","totalPrice","total_price","itemCount","item_count","addOnCount","endpoint","attempt","options","errorText","delay","ms","setTimeout","onCartChange","callback","intervalId","setInterval","async","currentCart","clearInterval","formatPrice","cents","currency","amount","Intl","NumberFormat","format","getAddOnSummary","count","reduce","sum","final_line_price","map","_addon_title","final_price","linePrice","forProduct","validateCart","issues","mainProducts","type","valid","cleanupOrphanedAddOns","validation","orphanedAddOns","issue","themes","initializeThemes","styleElement","default","name","margin","fontFamily","marginBottom","addonContainer","border","borderRadius","padding","transition","background","cursor","addonContainerHover","boxShadow","addonContainerSelected","backgroundColor","minimal","borderBottom","borderBottomColor","rounded","transform","compact","applyTheme","stylesToCSS","getFontSize","getImageSize","getImageBorderRadius","entries","property","camelToKebab","join","str","replace","toLowerCase","sizes","radiusMap","switchTheme","themeName","getAvailableThemes","addCustomTheme","charAt","toUpperCase","slice","removeStyles","getCurrentTheme","generatePreviewCSS","customConfig","originalConfig","css","shoplazzaAddon","instances","Map","defaultConfig","finalConfig","WidgetCore","instanceId","generateInstanceId","set","initForProduct","initMultiple","configs","destroyAll","clear","getInstance","getAllInstances","Array","from","setDefaultConfig","createCartService","CartService","createThemeManager","ThemeManager","hasAddOns","getMetaConfig","ShoplazzaAddonConfig","metaName","configKey","Math","random","substr","getVersion","getDebugInfo","version","userAgent","navigator","url","timestamp","toISOString","ShoplazzaAddon"],"sourceRoot":""}