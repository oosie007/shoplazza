Using launch settings from /Users/leroi/Development/Cursor/Shoplazza/shoplazza-addon-system/shoplazza-addon-app/Properties/launchSettings.json...
Building...
info: Microsoft.EntityFrameworkCore.Migrations[20411]
      Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-16 09:03:44.734375+00:00');
      SELECT changes();
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
          "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
          "ProductVersion" TEXT NOT NULL
      );
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "MigrationId", "ProductVersion"
      FROM "__EFMigrationsHistory"
      ORDER BY "MigrationId";
info: Microsoft.EntityFrameworkCore.Migrations[20405]
      No migrations were applied. The database is already up to date.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      DELETE FROM "__EFMigrationsLock";
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5000
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /Users/leroi/Development/Cursor/Shoplazza/shoplazza-addon-system/shoplazza-addon-app
warn: Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware[3]
      Failed to determine the https port for redirect.
warn: ShoplazzaAddonApp.Controllers.DiagnosticsController[0]
      Diagnostics database cleanup access denied
warn: ShoplazzaAddonApp.Controllers.DiagnosticsController[0]
      Diagnostics database cleanup access denied
warn: ShoplazzaAddonApp.Controllers.DiagnosticsController[0]
      ADMIN DATABASE CLEANUP REQUESTED - This will delete ALL data!
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "m"."Id", "m"."AccessToken", "m"."CreatedAt", "m"."IsActive", "m"."LastLoginAt", "m"."Metadata", "m"."Scopes", "m"."ScriptTagId", "m"."Shop", "m"."StoreEmail", "m"."StoreName", "m"."TokenCreatedAt", "m"."TokenExpiresAt", "m"."UninstalledAt", "m"."UpdatedAt"
      FROM "Merchants" AS "m"
      WHERE "m"."IsActive" AND "m"."UninstalledAt" IS NULL
      ORDER BY "m"."Shop"
warn: ShoplazzaAddonApp.Controllers.DiagnosticsController[0]
      All merchants are inactive. Proceeding with database cleanup...
warn: ShoplazzaAddonApp.Services.MerchantService[0]
      Starting complete database cleanup - this will delete ALL data!
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "m"."Id", "m"."AccessToken", "m"."CreatedAt", "m"."IsActive", "m"."LastLoginAt", "m"."Metadata", "m"."Scopes", "m"."ScriptTagId", "m"."Shop", "m"."StoreEmail", "m"."StoreName", "m"."TokenCreatedAt", "m"."TokenExpiresAt", "m"."UninstalledAt", "m"."UpdatedAt"
      FROM "Merchants" AS "m"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__merchantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "f"."Id", "f"."ActivatedAt", "f"."ConfigurationJson", "f"."CreatedAt", "f"."ErrorMessage", "f"."FunctionId", "f"."FunctionName", "f"."FunctionType", "f"."MerchantId", "f"."Status", "f"."UpdatedAt"
      FROM "FunctionConfigurations" AS "f"
      WHERE "f"."MerchantId" IN (
          SELECT "m"."value"
          FROM json_each(@__merchantIds_0) AS "m"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__merchantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."AnalyticsSettings", "c"."CreatedAt", "c"."CustomSettings", "c"."DefaultCurrency", "c"."DefaultRequiresShipping", "c"."DefaultTaxable", "c"."IsEnabled", "c"."MerchantId", "c"."UpdatedAt", "c"."WidgetSettings"
      FROM "Configurations" AS "c"
      WHERE "c"."MerchantId" IN (
          SELECT "m"."value"
          FROM json_each(@__merchantIds_0) AS "m"
      )
warn: ShoplazzaAddonApp.Services.MerchantService[0]
      Database cleanup completed successfully: Successfully deleted 0 total records across 0 tables
warn: ShoplazzaAddonApp.Controllers.DiagnosticsController[0]
      Database cleanup completed successfully. All data has been removed.
info: Microsoft.Hosting.Lifetime[0]
      Application is shutting down...
